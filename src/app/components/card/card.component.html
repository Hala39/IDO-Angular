<div class="card" #host *ngIf="task">
    <div 
        #titleRef
        class="title"
        (click)="editMode = true"
    >
        <div 
            *ngIf="!editMode"
            [innerHtml]="task.title  | highlighter:keyword"
        >
        </div>
        <input 
            *ngIf="editMode" 
            type="text"
            [value]="task.title | titlecase"
            autofocus
        >
        <button 
            *ngIf="editMode" 
            (click)="save()"
        >
            Save
        </button>
        <ng-content></ng-content>
    </div>
    <table>
        <tr>
            <td>Category</td>
            <td>{{ task.category | titlecase }}</td>
        </tr>
        <tr>
            <td>Due Date</td>
            <td>{{ task.dueDate ? (task.dueDate | date:'shortDate') : 'None' }}</td>
        </tr>
        <tr>
            <td>Estimate</td>
            <td>{{ task.estimatedTime }} {{ task.estimationUnit.toString() | lowercase | plural:task.estimatedTime }}</td>
        </tr>
        <tr>
            <td>Importance</td>
            <td>
                <div 
                    class="badge"
                    [class]="task.importance"
                    (change)="changePriority($event)"
                >
                    {{ task.importance.toString() | titlecase }}
                </div>
            </td>
        </tr>
    </table>
</div>
